<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ page import="java.sql.*" %>
<%@ page import="com.database.*" %>

<%
    // Get form data
    String fullName = request.getParameter("full-name");
    String email = request.getParameter("email");
    String contact = request.getParameter("contact");
    String username = request.getParameter("username");
    String password = request.getParameter("password");

    // Perform database operations
    String url = "jdbc:mysql://localhost:3306/repairmate";
		String username1 = "root";
		String password1 = "";
		Class.forName("com.mysql.jdbc.Driver");
		Connection conn = DriverManager.getConnection(url, username1, password1);
		System.out.println("Database connected");
     
        
   	Statement statement = conn.createStatement();
    
    try {
        // Insert user details into the database
        String insertQuery = "INSERT INTO user (full_name, email, contact, username, password) VALUES ('"+fullName+"','"+email+"','"+contact+"','"+username+"','"+password+"')";
           
        statement.executeUpdate(insertQuery);

        // Redirect to a success page
        response.sendRedirect("Index.html");
    } catch (SQLException e) {
        e.printStackTrace();
        // Handle the database error
        response.sendRedirect("error.html");
    } finally {
        // Close the database connection and statement
        if (statement != null) {
            statement.close();
        }
        if (conn != null) {
            conn.close();
        }
    }
%>
