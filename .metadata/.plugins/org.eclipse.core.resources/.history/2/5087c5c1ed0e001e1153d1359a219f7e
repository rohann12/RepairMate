<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ page import="com.database.*"%>
<%@ page import="java.sql.*"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Repair</title>
<style>
table {
	border-collapse: collapse;
	width: 100%;
}

th, td {
	padding: 8px;
	text-align: left;
	border-bottom: 1px solid #ddd;
}

th {
	background-color: #f2f2f2;
}
</style>
</head>
<body>
	<jsp:include page="nav.jsp" />
	<%
	int id = Integer.parseInt(request.getParameter("id"));
	Connection conn = dbconn.getConnection();
	Statement stmt = conn.createStatement();

	// Retrieve users with is_admin = 2
	String query = "SELECT * FROM order_list WHERE order_id=" + id;
	ResultSet rs = stmt.executeQuery(query);
	%>
	<%
	while (rs.next()) {
	%>


	<table>
		<tr>
			<th>Customer Name</th>
			<td><%=rs.getString("customer_name")%></td>
		</tr>
		<tr>
			<th>Vehicle Number</th>
			<td><%=rs.getString("vehicle_no")%></td>
		</tr>
		<tr>
			<th>Start Time</th>
			<td><%=rs.getString("start_time")%></td>
		</tr>
		<tr>
			<th>Estimated Cost</th>
			<td><%=rs.getString("estimated_cost")%></td>
		</tr>
		<tr>
			<th>Repairs</th>
			<td><%=rs.getString("repairs")%></td>
		</tr>
		<tr>
			<th>Time taken</th>
			<th><%=rs.getString("time_taken")%></th>
			<th><button onclick="calculateTime.start()">Start</button>
			<th><button onclick="calculateTime.stop()">Stop</button>
	</table>

	<script>
		var timeTaken =
	<%=rs.getInt("time_taken")%>
		;

		var calculateTime = {
			startTime : 0,
			timer : null,

			start : function() {
				this.startTime = Date.now();
				this.timer = setInterval(this.updateTime, 1000);
			},

			stop : function() {
				clearInterval(this.timer);
				var currentTime = Date.now();
				timeTaken += (currentTime - this.startTime) / 1000;
				// Send an AJAX request to update the 'time_taken' column in the database
				// with the new 'timeTaken' value.
			},

			updateTime : function() {
				var currentTime = Date.now();
				var elapsedTime = (currentTime - this.startTime) / 1000;
				// Update the display of elapsed time on the page
				// (e.g., using a DOM element or alert).
			}
		};
	</script>


	<%
	}
	%>
</body>
</html>