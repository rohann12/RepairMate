<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ page import="java.sql.*" %>
<%@ page import="com.database.dbconn" %>

<%
    // Get form data
    String fullName = request.getParameter("full-name");
    String email = request.getParameter("email");
    String contact = request.getParameter("contact");
    String username = request.getParameter("username");
    String password = request.getParameter("password");

    // Perform database operations
    Connection conn = dbconn.getConnection();
    PreparedStatement statement = null;
    
    try {
        // Insert user details into the database
        String insertQuery = "INSERT INTO user (full_name, email, contact, username, password) VALUES (?, ?, ?, ?, ?)";
        statement = conn.prepareStatement(insertQuery);
        statement.setString(1, fullName);
        statement.setString(2, email);
        statement.setString(3, contact);
        statement.setString(4, username);
        statement.setString(5, password);
        statement.executeUpdate();

        // Redirect to a success page
        response.sendRedirect("success.html");
    } catch (SQLException e) {
        e.printStackTrace();
        // Handle the database error
        response.sendRedirect("error.html");
    } finally {
        // Close the database connection and statement
        if (statement != null) {
            statement.close();
        }
        if (conn != null) {
            conn.close();
        }
    }
%>
