<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.sql.*" %>
<%@ page import="com.database.dbconn" %>

<%
   String username = request.getParameter("user-name");
   String password = request.getParameter("password");

   try {
      // Establish a database connection
      Connection conn = dbconn.getConnection();
         // Prepare the SQL statement
         String query = "SELECT * FROM user WHERE user_name = ? AND password = ?";
         PreparedStatement statement = conn.prepareStatement(query);
         statement.setString(1, username);
         statement.setString(2, password);

         // Execute the query
         try (ResultSet resultSet = statement.executeQuery()) {
            if (resultSet.next()) {
               // Valid login credentials, redirect to a success page
               response.sendRedirect("Index.html");
            } else {
               // Invalid login credentials, display an error message
               out.println("<p>Invalid username or password.</p>");
            }
         }
      
   } catch (Exception e) {
      out.println(e);
   }
%>