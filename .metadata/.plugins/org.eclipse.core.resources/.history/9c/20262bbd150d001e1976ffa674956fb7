<%@ page import="java.sql.*"%>
<%@ page import="com.database.dbconn"%>

<%
   String username = request.getParameter("user-name");
   String password = request.getParameter("password");

   try {
      // Establish a database connection
      try (Connection conn = dbconn.getConnection()) {
         // Create the SQL statement
         String query = "SELECT * FROM user WHERE user_name = '" + username + "' AND password = '" + password + "'";

         // Create a statement object
         try (Statement statement = conn.createStatement()) {
            // Execute the query
            try (ResultSet resultSet = statement.executeQuery(query)) {
               if (resultSet.next()) {
                  // Valid login credentials, redirect to a success page
                  response.sendRedirect("Index.html");
               } else {
                  // Invalid login credentials, display an error message
                  out.println("<p>Invalid username or password.</p>");
               }
            }
         }
      }
   } catch (Exception e) {
      out.println(e);
   }
%>
